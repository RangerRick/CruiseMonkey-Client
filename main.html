<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en" manifest="cruisemonkey.manifest"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en" manifest="cruisemonkey.manifest"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" manifest="cruisemonkey.manifest"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en" manifest="cruisemonkey.manifest"><!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0">
		<title>CruiseMonkey 3</title>

		<link rel="stylesheet" href="cruisemonkey.css" type="text/css" />
		
		<script src="foundation/javascripts/modernizr.foundation.js"></script>

		<!-- IE Fix for HTML5 Tags -->
		<!--[if lt IE 9]>
			<script src="html5shim/html5.js"></script>
		<![endif]-->
	</head>
	<body onload="onLoad()">
		<div id="header"></div>
		<div id="content"><div class="loading">loading...</div></div>

		<script id="header.html" type="text/html">
			<div class="fixed" style="display:block">
			  <nav class="top-bar">
			    <ul>
			      <li class="name"><h1><a href="#official-events">CruiseMonkey 3</a></h1></li>
			      <li class="toggle-topbar"><a href="#"></a></li>
			    </ul>
			    <section>
			      <ul class="left">
			        <li><a href="#official-events">Official Events</a></li>
			        <li><a href="#my-events">My Events</a></li>
			      </ul>
			      <ul class="right">
			      	<li data-bind="visible: notSignedIn"><a href="#" class="signin">Sign In</a></li>
			      	<li data-bind="visible: signedIn"><a href="#" class="signout">Sign Out</a></li>
			      </ul>
			    </section>
			  </nav>
			</div>
		</script>
		<script id="login.html" type="text/html">
			<form>
				<div class="row">
					<div class="three mobile-two columns">
						<label class="right inline">CruiseMonkey URL:</label>
					</div>
					<div class="nine mobile-two columns">
						<input type="text" placeholder="" data-bind="value: cruisemonkey" />
					</div>
				</div>
				<div class="row">
					<div class="three mobile-two columns">
						<label class="right inline">Login:</label>
					</div>
					<div class="nine mobile-two columns">
						<input type="text" placeholder="Twit-arrrr username..." data-bind="value: username" />
					</div>
				</div>
				<div class="row">
					<div class="three mobile-two columns">
						<label class="right inline">Password:</label>
					</div>
					<div class="nine mobile-two columns">
						<input type="password" placeholder="Twit-arrrr password..." data-bind="value: password" />
					</div>
				</div>
				<div class="row">
					<div class="twelve mobile-four columns">
						<div class="right inline">
							<a href="#" id="login_reset" class="round secondary button">Reset</a>
							<a href="#" id="login_save"  class="round button">Save</a>
						</div>
					</div>
				</div>
			</form>
		</script>
		<script id="events.html" type="text/html">
			<form id="{{eventType}}-search"><input type="search" results="5" placeholder="Search..." data-bind="value: filter, valueUpdate: 'afterkeydown'" /></form>
			<ul class="event-list unstyled" style="display:none">
				<!-- ko foreach: { data: filteredEvents } -->
				<li class="calendar-event {{eventType}} scrollable" data-bind="attr: { id: cleanId }"> <!-- onclick="" ontouchstart="" -->
					<div class="summary"><span data-bind="text: summary"></span></div>
					<div class="favorite"><input type="checkbox" data-bind="checked: favorite, attr: { id: cleanId() + '-favorite' }" /><label data-bind="attr: { for: cleanId() + '-favorite' }">&nbsp;</div>
					<div class="time">Time: <span data-bind="text: timespan"></span></div>
					<div class="location">Location: <span data-bind="text: location"></span></div>
					<div class="description"><span data-bind="text: description"></span></div>
				</li>
				<!-- /ko -->
			</ul>
		</script>

		<script>var m_isPhoneGap = true;</script>
		<script>
			var m_timeout = 5000;
			var m_deviceReady = false,
			initializeApp = function(event) {
				console.log('Initializing Cruise Monkey.');
				if (m_deviceReady) {
					console.log("Already initialized!");
					return;
				}
				m_deviceReady = true;
				templateLoader.load();
			},
			onLoad = function() {
				if (window.applicationCache.status == window.applicationCache.IDLE) {
					console.log("application cache is up-to-date");
				}
				window.applicationCache.addEventListener('updateready', function(e) {
					if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
						console.log("application cache has changed");
						// Browser downloaded a new app cache.
						// Swap it in and reload the page to get the new hotness.
						window.applicationCache.swapCache();
		        window.location.reload();
					} else {
						// Manifest didn't change. Nothing new to server.
						console.log("application cache is up-to-date");
					}
				}, false);

				if (m_isPhoneGap) {
					document.addEventListener("deviceready", initializeApp, false);
				} else {
					initializeApp();
				}
			};
		</script>

		<script src="phonegap.js"></script>
		<script src="3rdparty.js"></script>

		<script src="cruisemonkey.js"></script>
	</body>
</html>
