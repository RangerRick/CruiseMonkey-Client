<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en" manifest="cruisemonkey.manifest"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en" manifest="cruisemonkey.manifest"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" manifest="cruisemonkey.manifest"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en" manifest="cruisemonkey.manifest"><!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0">
		<title>CruiseMonkey 3</title>

		<link rel="stylesheet" href="3rdparty/foundation/stylesheets/foundation.min.css" type="text/css" />
		<link rel="stylesheet" href="3rdparty/jquery-ui/css/no-theme/jquery-ui-1.9.2.custom.min.css" type="text/css" />
		<link rel="stylesheet" href="styles.css" type="text/css" />
		
		<script src="3rdparty/foundation/javascripts/modernizr.foundation.js"></script>

		<!-- IE Fix for HTML5 Tags -->
		<!--[if lt IE 9]>
			<script src="3rdparty/html5shim/html5.js"></script>
		<![endif]-->
		<script id="header.html" type="text/html">
				<ul class="left">
					<li><a href="#official-events" class="icon icon-official-events">Official Events</a></li>
					<li><a href="#my-events"       class="icon icon-my-events"      >My Events</a></li>
					<li><a href="#public-events"   class="icon icon-public-events"  >Public Events</a></li>
					<li><a href="#amenities"       class="icon icon-amenities"      >Amenities</a></li>
					<li><a href="#decks"           class="icon icon-decks"          >Deck Plans</a></li>
					<li><a href="#add-event"       class="icon icon-add"            >Add Event</a></li>
				</ul>
				<ul class="right">
					<li class="signin" ><span data-bind="visible: showSignIn" ><a href="#" class="icon icon-login">Sign In</a></span></li>
					<li class="signout"><span data-bind="visible: showSignOut"><a href="#" class="icon icon-login">Sign Out</a></span></li>
				</ul>
		</script>
		<script id="login.html" type="text/html">
			<form data-bind="submit: onSubmit">
				<div class="row">
					<div class="three columns">
					</div>
					<div class="nine mobile-four columns" style="margin-top: 20px; margin-bottom: 20px">
						You will have to create an account on the Twit-arrr server before you can log in.
					</div>
				</div>
				<div class="row">
					<div class="three mobile-one columns">
						<label class="right inline">Server:</label>
					</div>
					<div class="nine mobile-three columns">
						<input type="url" placeholder="" data-bind="value: cruisemonkey" />
					</div>
				</div>
				<div class="row">
					<div class="three mobile-one columns">
						<label class="right inline">Login:</label>
					</div>
					<div class="nine mobile-three columns">
						<input type="text" placeholder="Twit-arrrr username..." data-bind="value: username" />
					</div>
				</div>
				<div class="row">
					<div class="three mobile-one columns">
						<label class="right inline">Password:</label>
					</div>
					<div class="nine mobile-three columns">
						<input type="password" placeholder="Twit-arrrr password..." data-bind="value: password" />
					</div>
				</div>
				<div class="row">
					<div class="twelve mobile-four columns">
						<ul class="button-group even two-up">
							<li><input type="reset" class="round secondary button" value="Reset" /></li>
							<li><input type="submit" class="round button" value="Save" /></li>
						</ul>
					</div>
				</div>
			</form>
			<a class="close-reveal-modal">&#215;</a>
		</script>
		<script id="events.html" type="text/html">
			<form id="{{eventType}}-search" class="search-bar"><input type="search" results="5" autosave="{{eventType}}-search-results" placeholder="Search..." data-bind="value: filter, valueUpdate: ['afterkeydown', 'search']" /></form>
			<ul class="event-list unstyled">
				<!-- ko foreach: { data: filteredEvents } -->
				<li class="calendar-event {{eventType}} scrollable" data-bind="attr: { id: cleanId }, css: { mine: isMine }"> <!-- onclick="" ontouchstart="" -->
					<div class="summary"><span data-bind="text: summary"></span></div>
					<div class="favorite" data-bind="visible: !isMine()"><input type="checkbox" class="favorite-checkbox" data-bind="checked: favorite, click: $parent.toggleFavorite, attr: { id: cleanId() + '-favorite' }" /><label data-bind="attr: { for: cleanId() + '-favorite' }">&nbsp;</div>
					<div class="trash" data-bind="visible: isMine"><input type="button" class="trash-button" data-bind="click: $parent.deleteEvent, attr: { id: cleanId() + '-trash' }" /><label data-bind="attr: { for: cleanId() + '-trash' }">&nbsp;</div>
					<div class="public" data-bind="visible: isMine"><input type="checkbox" class="public-checkbox" data-bind="checked: isPublic, click: $parent.togglePublic, attr: { id: cleanId() + '-public' }" /><label data-bind="attr: { for: cleanId() + '-public' }">&nbsp;</div>
					<div class="createdBy" data-bind="visible: !isMine()">Created By: <span data-bind="text: createdBy"></span></div>
					<div class="time">Time: <span data-bind="text: timespan"></span></div>
					<div class="location">Location: <span data-bind="text: location"></span></div>
					<div class="description"><span data-bind="text: description"></span></div>
				</li>
				<!-- /ko -->
			</ul>
		</script>
		<script id="amenities.html" type="text/html">
			<form id="amenities-search" class="search-bar"><input type="search" results="5" autosave="amenities-search-results" placeholder="Search..." data-bind="value: filter, valueUpdate: ['afterkeydown', 'search']" /></form>
			<ul class="amenities-list unstyled">
				<!-- ko foreach: { data: orderedAmenities, as: 'deck' } -->
				<li class="divider"><span data-bind="text: 'Deck ' + number"></span></li>
				<!-- ko foreach: { data: amenities, as: 'amenity' } -->
				<li class="amenity scrollable" data-bind="attr: { id: id }">
					<div class="deck"><span data-bind="text: deck"></span></div>
					<div class="name"><span data-bind="text: name"></span></div>
					<div class="description"><span data-bind="text: description"></span></div>
				</li>
				<!-- /ko -->
				<!-- /ko -->
			</ul>
		</script>
		<script id="decks.html" type="text/html">
			<ul class="deck-list unstyled">
				<!-- ko foreach: { data: decks, as: 'deck' } -->
				<li data-bind="attr: { id: id() } " class="deck scrollable">
					<div data-bind="text: 'Deck ' + number()" class="divider"></div>
					<img data-bind="attr: { id: id() + '-image', src: image }" />
				</li>
				<!-- /ko -->
			</ul>
		</script>
		<script>window.isPhoneGap = true;</script>
		<script>
			"use strict";
			var m_timeout = 10000;
			var m_deviceReady = false,
			initializeApp = function(event) {
				console.log('Initializing Cruise Monkey.');
				if (m_deviceReady) {
					console.log("Already initialized!");
					return;
				}

				$('#login').trigger('reveal:close');

				m_deviceReady = true;
				templateLoader.load();

				if (window.isPhoneGap) {
					console.log("we're on phonegap, hiding the splashscreen");
				}
			},
			onLoad = function() {
				if (window.applicationCache) {
					if (window.applicationCache.status == window.applicationCache.IDLE) {
						console.log("application cache is up-to-date");
					} else {
						window.applicationCache.addEventListener('updateready', function(e) {
							if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
								console.log("application cache has changed");
								// Browser downloaded a new app cache.
								// Swap it in and reload the page to get the new hotness.
								window.applicationCache.swapCache();
								window.location.reload();
							} else {
								// Manifest didn't change. Nothing new to server.
								console.log("application cache is up-to-date");
							}
						}, false);
					}
				}

				if (window.isPhoneGap) {
					document.addEventListener("deviceready", initializeApp, false);
				} else {
					initializeApp();
				}
			};
		</script>

		<script src="phonegap.js"></script>
		<script src="childbrowser.js"></script>
		<script src="3rdparty.js"></script>

		<script src="cruisemonkey.js"></script>
	</head>
	<body onload="onLoad()">
		<div id="header"></div>
		<div id="content"><div class="loading"></div></div>
		<div id="add-event" style="display: none">
			<form data-bind="submit: onSubmit">
				<div class="row">
					<div class="three mobile-one columns">
						<label class="right inline">Summary:</label>
					</div>
					<div class="nine mobile-three columns">
						<input type="text" placeholder="" data-bind="value: summary" />
					</div>
				</div>
				<div class="row">
					<div class="three mobile-one columns">
						<label class="right inline">Description:</label>
					</div>
					<div class="nine mobile-three columns">
						<textarea data-bind="value: description"></textarea>
					</div>
				</div>
				<div class="row">
					<div class="three mobile-one columns">
						<label class="right inline">Start:</label>
					</div>
					<div class="nine mobile-three columns">
						<input type="text" id="start-datepicker" placeholder="" data-bind="value: startDate" />
					</div>
				</div>
				<div class="row">
					<div class="three mobile-one columns">
						<label class="right inline">End:</label>
					</div>
					<div class="nine mobile-three columns">
						<input type="text" id="end-datepicker" placeholder="" data-bind="value: endDate" />
					</div>
				</div>
				<div class="row">
					<div class="three mobile-one columns">
						<label class="right inline">Location:</label>
					</div>
					<div class="nine mobile-three columns">
						<input type="text" placeholder="" data-bind="value: location" />
					</div>
				</div>
				<div class="row">
					<div class="three mobile-one columns">
						<label class="right inline">Public?</label>
					</div>
					<div class="nine mobile-three columns">
						<input type="checkbox" placeholder="" data-bind="checked: isPublic" />
					</div>
				</div>
				<div class="row">
					<div class="twelve mobile-four columns">
						<ul class="button-group even two-up">
							<li><input type="reset" class="round secondary button" value="Reset" /></li>
							<li><input type="submit" class="round button" value="Save" /></li>
						</ul>
					</div>
				</div>
			</form>
			<a class="close-reveal-modal">&#215;</a>
		</div>
	</body>
</html>
